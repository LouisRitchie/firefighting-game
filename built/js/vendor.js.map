{"version":3,"sources":["node_modules/handlebars-brunch/vendor/handlebars.runtime-1.0.rc.1.js","vendor/rogue.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"built/js/vendor.js","sourcesContent":["// lib/handlebars/base.js\r\n\r\n/*jshint eqnull:true*/\r\nthis.Handlebars = {};\r\n\r\n(function(Handlebars) {\r\n\r\nHandlebars.VERSION = \"1.0.rc.1\";\r\n\r\nHandlebars.helpers  = {};\r\nHandlebars.partials = {};\r\n\r\nHandlebars.registerHelper = function(name, fn, inverse) {\r\n  if(inverse) { fn.not = inverse; }\r\n  this.helpers[name] = fn;\r\n};\r\n\r\nHandlebars.registerPartial = function(name, str) {\r\n  this.partials[name] = str;\r\n};\r\n\r\nHandlebars.registerHelper('helperMissing', function(arg) {\r\n  if(arguments.length === 2) {\r\n    return undefined;\r\n  } else {\r\n    throw new Error(\"Could not find property '\" + arg + \"'\");\r\n  }\r\n});\r\n\r\nvar toString = Object.prototype.toString, functionType = \"[object Function]\";\r\n\r\nHandlebars.registerHelper('blockHelperMissing', function(context, options) {\r\n  var inverse = options.inverse || function() {}, fn = options.fn;\r\n\r\n\r\n  var ret = \"\";\r\n  var type = toString.call(context);\r\n\r\n  if(type === functionType) { context = context.call(this); }\r\n\r\n  if(context === true) {\r\n    return fn(this);\r\n  } else if(context === false || context == null) {\r\n    return inverse(this);\r\n  } else if(type === \"[object Array]\") {\r\n    if(context.length > 0) {\r\n      return Handlebars.helpers.each(context, options);\r\n    } else {\r\n      return inverse(this);\r\n    }\r\n  } else {\r\n    return fn(context);\r\n  }\r\n});\r\n\r\nHandlebars.K = function() {};\r\n\r\nHandlebars.createFrame = Object.create || function(object) {\r\n  Handlebars.K.prototype = object;\r\n  var obj = new Handlebars.K();\r\n  Handlebars.K.prototype = null;\r\n  return obj;\r\n};\r\n\r\nHandlebars.registerHelper('each', function(context, options) {\r\n  var fn = options.fn, inverse = options.inverse;\r\n  var ret = \"\", data;\r\n\r\n  if (options.data) {\r\n    data = Handlebars.createFrame(options.data);\r\n  }\r\n\r\n  if(context && context.length > 0) {\r\n    for(var i=0, j=context.length; i<j; i++) {\r\n      if (data) { data.index = i; }\r\n      ret = ret + fn(context[i], { data: data });\r\n    }\r\n  } else {\r\n    ret = inverse(this);\r\n  }\r\n  return ret;\r\n});\r\n\r\nHandlebars.registerHelper('if', function(context, options) {\r\n  var type = toString.call(context);\r\n  if(type === functionType) { context = context.call(this); }\r\n\r\n  if(!context || Handlebars.Utils.isEmpty(context)) {\r\n    return options.inverse(this);\r\n  } else {\r\n    return options.fn(this);\r\n  }\r\n});\r\n\r\nHandlebars.registerHelper('unless', function(context, options) {\r\n  var fn = options.fn, inverse = options.inverse;\r\n  options.fn = inverse;\r\n  options.inverse = fn;\r\n\r\n  return Handlebars.helpers['if'].call(this, context, options);\r\n});\r\n\r\nHandlebars.registerHelper('with', function(context, options) {\r\n  return options.fn(context);\r\n});\r\n\r\nHandlebars.registerHelper('log', function(context) {\r\n  Handlebars.log(context);\r\n});\r\n\r\n}(this.Handlebars));\r\n;\r\n// lib/handlebars/utils.js\r\nHandlebars.Exception = function(message) {\r\n  var tmp = Error.prototype.constructor.apply(this, arguments);\r\n\r\n  for (var p in tmp) {\r\n    if (tmp.hasOwnProperty(p)) { this[p] = tmp[p]; }\r\n  }\r\n\r\n  this.message = tmp.message;\r\n};\r\nHandlebars.Exception.prototype = new Error();\r\n\r\n// Build out our basic SafeString type\r\nHandlebars.SafeString = function(string) {\r\n  this.string = string;\r\n};\r\nHandlebars.SafeString.prototype.toString = function() {\r\n  return this.string.toString();\r\n};\r\n\r\n(function() {\r\n  var escape = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    '\"': \"&quot;\",\r\n    \"'\": \"&#x27;\",\r\n    \"`\": \"&#x60;\"\r\n  };\r\n\r\n  var badChars = /[&<>\"'`]/g;\r\n  var possible = /[&<>\"'`]/;\r\n\r\n  var escapeChar = function(chr) {\r\n    return escape[chr] || \"&amp;\";\r\n  };\r\n\r\n  Handlebars.Utils = {\r\n    escapeExpression: function(string) {\r\n      // don't escape SafeStrings, since they're already safe\r\n      if (string instanceof Handlebars.SafeString) {\r\n        return string.toString();\r\n      } else if (string == null || string === false) {\r\n        return \"\";\r\n      }\r\n\r\n      if(!possible.test(string)) { return string; }\r\n      return string.replace(badChars, escapeChar);\r\n    },\r\n\r\n    isEmpty: function(value) {\r\n      if (typeof value === \"undefined\") {\r\n        return true;\r\n      } else if (value === null) {\r\n        return true;\r\n      } else if (value === false) {\r\n        return true;\r\n      } else if(Object.prototype.toString.call(value) === \"[object Array]\" && value.length === 0) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n})();;\r\n// lib/handlebars/runtime.js\r\nHandlebars.VM = {\r\n  template: function(templateSpec) {\r\n    // Just add water\r\n    var container = {\r\n      escapeExpression: Handlebars.Utils.escapeExpression,\r\n      invokePartial: Handlebars.VM.invokePartial,\r\n      programs: [],\r\n      program: function(i, fn, data) {\r\n        var programWrapper = this.programs[i];\r\n        if(data) {\r\n          return Handlebars.VM.program(fn, data);\r\n        } else if(programWrapper) {\r\n          return programWrapper;\r\n        } else {\r\n          programWrapper = this.programs[i] = Handlebars.VM.program(fn);\r\n          return programWrapper;\r\n        }\r\n      },\r\n      programWithDepth: Handlebars.VM.programWithDepth,\r\n      noop: Handlebars.VM.noop\r\n    };\r\n\r\n    return function(context, options) {\r\n      options = options || {};\r\n      return templateSpec.call(container, Handlebars, context, options.helpers, options.partials, options.data);\r\n    };\r\n  },\r\n\r\n  programWithDepth: function(fn, data, $depth) {\r\n    var args = Array.prototype.slice.call(arguments, 2);\r\n\r\n    return function(context, options) {\r\n      options = options || {};\r\n\r\n      return fn.apply(this, [context, options.data || data].concat(args));\r\n    };\r\n  },\r\n  program: function(fn, data) {\r\n    return function(context, options) {\r\n      options = options || {};\r\n\r\n      return fn(context, options.data || data);\r\n    };\r\n  },\r\n  noop: function() { return \"\"; },\r\n  invokePartial: function(partial, name, context, helpers, partials, data) {\r\n    var options = { helpers: helpers, partials: partials, data: data };\r\n\r\n    if(partial === undefined) {\r\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be found\");\r\n    } else if(partial instanceof Function) {\r\n      return partial(context, options);\r\n    } else if (!Handlebars.compile) {\r\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be compiled when running in runtime-only mode\");\r\n    } else {\r\n      partials[name] = Handlebars.compile(partial, {data: data !== undefined});\r\n      return partials[name](context, options);\r\n    }\r\n  }\r\n};\r\n\r\nHandlebars.template = Handlebars.VM.template;\r\n;\r\n","// Generated by CoffeeScript 1.3.3\r\n(function() {\r\n  var Animation, AssetManager, Entity, Eventer, Factory, Game, GameLoop, Importer, Keyboard, Mouse, Rogue, RollingAverage, SpriteSheet, TileMap, Tween, ViewPort, b, c, collision, find, gfx, intergrate, log, math, physics, sqrt, util, v,\r\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\r\n    __hasProp = {}.hasOwnProperty,\r\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\r\n    __slice = [].slice;\r\n\r\n  gfx = {};\r\n\r\n  gfx.scale = function(simg, s, pixel) {\r\n    var ctx, dimg;\r\n    if (pixel) {\r\n      dimg = util.canvas();\r\n      dimg.width = simg.width * s[0];\r\n      dimg.height = simg.height * s[1];\r\n      ctx = dimg.getContext(\"2d\");\r\n      ctx.scale(s[0], s[1]);\r\n      ctx.imageSmoothingEnabled = ctx.mozImageSmoothingEnabled = ctx.webkitImageSmoothingEnabled = false;\r\n      ctx.drawImage(simg, 0, 0, simg.width, simg.height);\r\n      ctx.fillStyle = ctx.createPattern(simg, 'repeat');\r\n      ctx.fillRect(0, 0, simg.width, simg.height);\r\n      return dimg;\r\n    } else {\r\n      simg.width *= s[0];\r\n      simg.height *= s[1];\r\n      ctx = simg.getContext(\"2d\");\r\n      ctx.scale(s[0], s[1]);\r\n      return simg;\r\n    }\r\n  };\r\n\r\n  gfx.edit = function(data, x, y, r, g, b, a) {\r\n    var darray, index;\r\n    darray = data.data;\r\n    index = (y * data.width + x) * 4;\r\n    if (r || g || b || a) {\r\n      darray[index] = r || darray[index];\r\n      darray[index++] = g || darray[index];\r\n      darray[index++] = b || darray[index];\r\n      darray[index++] = a || darray[index];\r\n      return data.data = darray;\r\n    } else {\r\n      return [darray[index], darray[index++], darray[index++], darray[index++]];\r\n    }\r\n  };\r\n\r\n  gfx.edgeDetect = function(img) {\r\n    var ctx, data, lookup, points, x, y, _i, _j, _ref, _ref1;\r\n    ctx = img.getContext(\"2d\");\r\n    data = ctx.getImageData(0, 0, img.width, img.height);\r\n    lookup = function(x, y) {\r\n      return gfx.edit(data, x, y)[3];\r\n    };\r\n    points = [];\r\n    for (x = _i = 0, _ref = img.width; 0 <= _ref ? _i <= _ref : _i >= _ref; x = 0 <= _ref ? ++_i : --_i) {\r\n      for (y = _j = 0, _ref1 = img.height; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; y = 0 <= _ref1 ? ++_j : --_j) {\r\n        if (lookup(x, y) > 0) {\r\n          if (lookup(x + 1, y) === 0) {\r\n            points.push([x, y, \"right\"]);\r\n          } else if (lookup(x - 1, y) === 0) {\r\n            points.push([x, y, \"left\"]);\r\n          } else if (lookup(x, y + 1) === 0) {\r\n            points.push([x, y, \"down\"]);\r\n          } else if (lookup(x, y - 1) === 0) {\r\n            points.push([x, y, \"up\"]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return points;\r\n  };\r\n\r\n  AssetManager = (function() {\r\n    var callback, codecs, filetypes;\r\n\r\n    function AssetManager(manifest) {\r\n      var contents, name, _ref;\r\n      this.callbacks = {\r\n        load: {},\r\n        complete: {},\r\n        error: {}\r\n      };\r\n      this.base = manifest.baseUrl || \"\";\r\n      this.packs = {};\r\n      this.total = this.complete = 0;\r\n      _ref = manifest.packs;\r\n      for (name in _ref) {\r\n        contents = _ref[name];\r\n        this.packs[name] = contents;\r\n        this.total += contents.length;\r\n      }\r\n      manifest.preload && this.downloadAll();\r\n    }\r\n\r\n    AssetManager.prototype.download = function(pack) {\r\n      var asset, contents, data, ext, key, that, value, _i, _len;\r\n      that = this;\r\n      contents = this.packs[pack];\r\n      if (contents == null) {\r\n        log(2, \"Pack \" + pack + \" does not exist\");\r\n        return false;\r\n      }\r\n      if (contents.loaded !== contents.length) {\r\n        contents.loaded = 0;\r\n        for (_i = 0, _len = contents.length; _i < _len; _i++) {\r\n          asset = contents[_i];\r\n          ext = asset.src.split(\".\").pop();\r\n          asset.src = this.base + asset.src;\r\n          asset.pack = pack;\r\n          for (key in filetypes) {\r\n            value = filetypes[key];\r\n            if (__indexOf.call(value, ext) >= 0) {\r\n              asset.type = key;\r\n            }\r\n          }\r\n          if (asset.type == null) {\r\n            log(2, \"Unknown asset type for extension: \" + ext);\r\n            return false;\r\n          }\r\n          switch (asset.type) {\r\n            case \"image\":\r\n              data = new Image();\r\n              data.a = asset;\r\n              data.onload = function() {\r\n                var a, canvas;\r\n                canvas = util.imgToCanvas(this);\r\n                a = util.mixin(canvas, this.a);\r\n                return that.loaded(a);\r\n              };\r\n              data.onerror = function() {\r\n                return callback.call(that, this.a, false);\r\n              };\r\n              data.src = asset.src;\r\n              break;\r\n            case \"sound\":\r\n              asset.alt = this.base + asset.alt;\r\n              data = new Audio();\r\n              data.preload = \"none\";\r\n              asset = util.mixin(data, asset);\r\n              if (!data.canPlayType(codecs[ext])) {\r\n                asset.src = asset.alt;\r\n              }\r\n              asset.onerror = function() {\r\n                return callback.call(that, asset, false);\r\n              };\r\n              asset.addEventListener('canplaythrough', function() {\r\n                return that.loaded(this);\r\n              });\r\n              asset.load();\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    AssetManager.prototype.loaded = function(asset) {\r\n      var pack, _name, _ref;\r\n      pack = this.packs[asset.pack];\r\n      if ((_ref = this[_name = asset.pack]) == null) {\r\n        this[_name] = {};\r\n      }\r\n      this[asset.pack][asset.name] = asset;\r\n      return callback.call(this, asset, true);\r\n    };\r\n\r\n    AssetManager.prototype.downloadAll = function() {\r\n      var key, val, _ref, _results;\r\n      _ref = this.packs;\r\n      _results = [];\r\n      for (key in _ref) {\r\n        val = _ref[key];\r\n        _results.push(this.download(key));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    AssetManager.prototype.on = function(e, pack, fn) {\r\n      var _base, _name, _ref, _ref1;\r\n      if (e === \"load\" || e === \"complete\" || e === \"error\") {\r\n        if (pack === \"all\") {\r\n          if ((_ref = this[_name = \"on\" + e]) == null) {\r\n            this[_name] = [];\r\n          }\r\n          return this[\"on\" + e].push(fn);\r\n        } else {\r\n          if ((_ref1 = (_base = this.callbacks[e])[pack]) == null) {\r\n            _base[pack] = [];\r\n          }\r\n          return this.callbacks[e][pack].push(fn);\r\n        }\r\n      }\r\n    };\r\n\r\n    callback = function(asset, status) {\r\n      var afuncs, apercent, func, funcs, pack, percent, s, _i, _j, _len, _len1, _results;\r\n      pack = this.packs[asset.pack];\r\n      percent = math.round(++pack.loaded / pack.length * 100);\r\n      apercent = math.round(++this.complete / this.total * 100);\r\n      funcs = [];\r\n      afuncs = [];\r\n      if (status) {\r\n        s = \"load\";\r\n      } else {\r\n        \"error\";\r\n\r\n      }\r\n      funcs = funcs.concat(this.callbacks[s][asset.pack]);\r\n      afuncs = afuncs.concat(this[\"on\" + s]);\r\n      if (percent === 100) {\r\n        funcs = funcs.concat(this.callbacks.complete[asset.pack]);\r\n      }\r\n      if (apercent === 100) {\r\n        afuncs = afuncs.concat(this.oncomplete);\r\n      }\r\n      for (_i = 0, _len = funcs.length; _i < _len; _i++) {\r\n        func = funcs[_i];\r\n        if (func) {\r\n          func(asset, percent);\r\n        }\r\n      }\r\n      _results = [];\r\n      for (_j = 0, _len1 = afuncs.length; _j < _len1; _j++) {\r\n        func = afuncs[_j];\r\n        if (func) {\r\n          _results.push(func(asset, apercent));\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    filetypes = {\r\n      image: [\"png\", \"gif\", \"jpg\", \"jpeg\", \"tiff\"],\r\n      sound: [\"mp3\", \"ogg\"]\r\n    };\r\n\r\n    codecs = {\r\n      'mp3': 'audio/mpeg',\r\n      'ogg': 'audio/ogg'\r\n    };\r\n\r\n    return AssetManager;\r\n\r\n  })();\r\n\r\n  SpriteSheet = (function() {\r\n\r\n    function SpriteSheet(options) {\r\n      var c, cx, x, y, _i, _j, _ref, _ref1, _ref2, _ref3;\r\n      this.options = options;\r\n      this.img = this.options.image;\r\n      this.res = this.options.res || [32, 32];\r\n      this.length = 0;\r\n      for (x = _i = 0, _ref = this.img.width, _ref1 = this.res[0]; 0 <= _ref ? _i < _ref : _i > _ref; x = _i += _ref1) {\r\n        for (y = _j = 0, _ref2 = this.img.height, _ref3 = this.res[1]; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; y = _j += _ref3) {\r\n          c = util.canvas();\r\n          cx = c.getContext(\"2d\");\r\n          c.width = this.res[0];\r\n          c.height = this.res[1];\r\n          cx.drawImage(this.img, x, y, c.width, c.height, 0, 0, c.width, c.height);\r\n          this[this.length] = c;\r\n          this.length++;\r\n        }\r\n      }\r\n    }\r\n\r\n    SpriteSheet.prototype.slice = function(start, end) {\r\n      return Array.prototype.slice.call(this, start, end);\r\n    };\r\n\r\n    return SpriteSheet;\r\n\r\n  })();\r\n\r\n  Animation = (function() {\r\n\r\n    function Animation(options) {\r\n      this.options = options;\r\n      this.sprites = this.options.spritesheet;\r\n      this.speed = this.options.speed || 6;\r\n      this.i = this.options.start || 0;\r\n      this.t = 0;\r\n      this.loop = this.options.loop || true;\r\n      this.bounce = this.options.bounce || false;\r\n      this.finished = false;\r\n      this.onFinish = this.options.onFinish;\r\n      this.dir = 1;\r\n      this.frame = this.sprites[this.i];\r\n    }\r\n\r\n    Animation.prototype.next = function() {\r\n      if (this.t === this.speed && !this.finished) {\r\n        this.frame = this.sprites[this.i += this.dir];\r\n        this.t = 0;\r\n      }\r\n      if (this.i === this.sprites.length - 1) {\r\n        if (!this.loop) {\r\n          this.finished = true;\r\n          if (this.onFinish) {\r\n            this.onFinish();\r\n          }\r\n        } else {\r\n          if (this.bounce) {\r\n            this.dir = -1;\r\n          } else {\r\n            this.i = 0;\r\n          }\r\n        }\r\n      }\r\n      if (this.i === 0 && this.dir === -1) {\r\n        this.dir = 1;\r\n      }\r\n      this.t++;\r\n      return this.frame;\r\n    };\r\n\r\n    return Animation;\r\n\r\n  })();\r\n\r\n  Entity = (function() {\r\n\r\n    function Entity(options) {\r\n      this.updates = [];\r\n      util.mixin(this, options);\r\n      this.ev = new Eventer(this);\r\n      this.components = new Importer(Rogue.components, this);\r\n      if (this.require) {\r\n        this.components.add(this.require);\r\n      }\r\n      delete this.require;\r\n      if (this.parent) {\r\n        this.parent.e.push(this);\r\n      }\r\n    }\r\n\r\n    Entity.prototype.update = function(dt) {\r\n      var func, _i, _len, _ref, _results;\r\n      _ref = this.updates;\r\n      _results = [];\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        func = _ref[_i];\r\n        if (func != null) {\r\n          _results.push(func.call(this, dt));\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    return Entity;\r\n\r\n  })();\r\n\r\n  Importer = (function() {\r\n\r\n    function Importer(from, dest, mixin) {\r\n      this.from = from;\r\n      this.dest = dest;\r\n      this.mixin = mixin != null ? mixin : true;\r\n    }\r\n\r\n    Importer.prototype.add = function(imports) {\r\n      var imp, key, val, _i, _len, _ref, _results;\r\n      imports = [].concat(imports);\r\n      _results = [];\r\n      for (_i = 0, _len = imports.length; _i < _len; _i++) {\r\n        imp = imports[_i];\r\n        if (!(this[imp] != null)) {\r\n          if (this.from[imp] != null) {\r\n            this[imp] = new this.from[imp];\r\n            if (this.mixin) {\r\n              _ref = this[imp];\r\n              for (key in _ref) {\r\n                val = _ref[key];\r\n                if (key !== \"onadd\" && key !== \"onremove\" && key !== \"run\" && (val != null)) {\r\n                  this.dest[key] = val;\r\n                }\r\n              }\r\n            }\r\n            if (this[imp].onadd) {\r\n              _results.push(this[imp].onadd.call(this.dest));\r\n            } else {\r\n              _results.push(void 0);\r\n            }\r\n          } else {\r\n            _results.push(log(2, \"mixin \" + imp + \" does not exist!\"));\r\n          }\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    Importer.prototype.remove = function(imports) {\r\n      var imp, key, val, _i, _len, _ref, _results;\r\n      imports = [].concat(imports);\r\n      _results = [];\r\n      for (_i = 0, _len = imports.length; _i < _len; _i++) {\r\n        imp = imports[_i];\r\n        if (!(this[imp] != null)) {\r\n          continue;\r\n        }\r\n        if (this.mixin) {\r\n          _ref = this[imp];\r\n          for (key in _ref) {\r\n            val = _ref[key];\r\n            if ((this.dest[key] != null) && this.dest[key] === this[imp][key]) {\r\n              delete this.dest[key];\r\n            }\r\n          }\r\n        }\r\n        if (this[imp].onremove) {\r\n          this[imp].onremove.call(this.dest);\r\n        }\r\n        _results.push(delete this[imp]);\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    return Importer;\r\n\r\n  })();\r\n\r\n  Factory = (function() {\r\n\r\n    function Factory(options) {\r\n      var i, _i, _ref;\r\n      this.hanger = [];\r\n      this.entity = options.entity || Rogue.Entity;\r\n      this.opts = options.options || {};\r\n      this.initial = options.initial;\r\n      for (i = _i = 0, _ref = this.initial; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n        this.hanger.push(this.build());\r\n      }\r\n    }\r\n\r\n    Factory.prototype.deploy = function() {\r\n      var e;\r\n      if (this.hanger.length > 0) {\r\n        e = this.hanger.pop();\r\n      } else {\r\n        e = this.build();\r\n      }\r\n      if (e.parent) {\r\n        e.parent.add(e);\r\n      }\r\n      return e;\r\n    };\r\n\r\n    Factory.prototype.build = function() {\r\n      var ent;\r\n      ent = new this.entity(this.opts);\r\n      ent.factory = this;\r\n      ent[\"return\"] = function() {\r\n        if (this.parent) {\r\n          this.parent.remove(this);\r\n        }\r\n        this.factory.hanger.push(this);\r\n        return util.mixin(this, this.factory.opts);\r\n      };\r\n      return ent;\r\n    };\r\n\r\n    return Factory;\r\n\r\n  })();\r\n\r\n  c = {};\r\n\r\n  c.sprite = (function() {\r\n\r\n    function sprite() {}\r\n\r\n    sprite.prototype.onadd = function() {\r\n      var _ref, _ref1, _ref2, _ref3;\r\n      if (!this.image) {\r\n        log(2, \"Sprite entities require an image\");\r\n      }\r\n      if ((_ref = this.x) == null) {\r\n        this.x = 0;\r\n      }\r\n      if ((_ref1 = this.y) == null) {\r\n        this.y = 0;\r\n      }\r\n      if ((_ref2 = this.angle) == null) {\r\n        this.angle = 0;\r\n      }\r\n      if ((_ref3 = this.opacity) == null) {\r\n        this.opacity = 255;\r\n      }\r\n      if (this.scaleFactor != null) {\r\n        return this.scale(this.scaleFactor, this.pixel);\r\n      } else {\r\n        return this.recalculateImage();\r\n      }\r\n    };\r\n\r\n    sprite.prototype.draw = function() {\r\n      var r;\r\n      c = this.parent.context;\r\n      r = math.round;\r\n      c.save();\r\n      c.translate(r(this.x - this.xOffset), r(this.y - this.yOffset));\r\n      c.rotate(this.angle * Math.PI / 180);\r\n      c.globalAlpha = this.opacity;\r\n      c.drawImage(this.image, 0, 0, this.width, this.height);\r\n      return c.restore();\r\n    };\r\n\r\n    sprite.prototype.scale = function(scaleFactor, pixel) {\r\n      this.scaleFactor = scaleFactor;\r\n      this.pixel = pixel;\r\n      this.image = gfx.scale(this.image, this.scaleFactor, this.pixel);\r\n      return this.recalculateImage();\r\n    };\r\n\r\n    sprite.prototype.rect = function() {\r\n      return {\r\n        x: this.x - this.xOffset,\r\n        y: this.y - this.yOffset,\r\n        width: this.width,\r\n        height: this.height\r\n      };\r\n    };\r\n\r\n    sprite.prototype.recalculateImage = function() {\r\n      this.width = this.image.width;\r\n      this.height = this.image.height;\r\n      this.xOffset = math.round(this.width / 2);\r\n      return this.yOffset = math.round(this.height / 2);\r\n    };\r\n\r\n    return sprite;\r\n\r\n  })();\r\n\r\n  c.move = (function() {\r\n\r\n    function move() {}\r\n\r\n    move.prototype.onadd = function() {\r\n      return this.components.add(\"sprite\");\r\n    };\r\n\r\n    move.prototype.move = function(x, y) {\r\n      this.x += x;\r\n      return this.y += y;\r\n    };\r\n\r\n    move.prototype.moveTo = function(x, y) {\r\n      this.x = x;\r\n      this.y = y;\r\n    };\r\n\r\n    return move;\r\n\r\n  })();\r\n\r\n  c.tile = (function() {\r\n\r\n    function tile() {}\r\n\r\n    tile.prototype.onadd = function() {\r\n      return this.components.add(\"sprite\");\r\n    };\r\n\r\n    tile.prototype.move = function(x, y) {\r\n      util.remove(this.tile.contents, this);\r\n      this.x += x;\r\n      this.y += y;\r\n      return this.tile.parent.place(this);\r\n    };\r\n\r\n    tile.prototype.moveTo = function(x, y) {\r\n      this.x = x;\r\n      this.y = y;\r\n      util.remove(this.tile.contents, this);\r\n      return this.tile.parent.place(this);\r\n    };\r\n\r\n    return tile;\r\n\r\n  })();\r\n\r\n  c.collide = (function() {\r\n\r\n    function collide() {}\r\n\r\n    collide.prototype.onadd = function() {\r\n      if (this.components[\"layer\"] == null) {\r\n        this.components.add(\"sprite\");\r\n      }\r\n      return this.solid = this.components[\"physics\"] != null ? false : true;\r\n    };\r\n\r\n    collide.prototype.findCollisions = function() {\r\n      var col, nearby, obj, _i, _len;\r\n      if (this.parent.hashmap) {\r\n        nearby = this.parent.hashmap.find(this);\r\n      } else {\r\n        nearby = this.parent.find([\"collide\"]);\r\n      }\r\n      this.colliding = [];\r\n      for (_i = 0, _len = nearby.length; _i < _len; _i++) {\r\n        obj = nearby[_i];\r\n        col = this.collide(obj);\r\n        if (col) {\r\n          this.ev.emit(\"hit\", col);\r\n          obj.ev.emit(\"hit\", col);\r\n          this.colliding.push(col);\r\n        }\r\n      }\r\n      return this.colliding;\r\n    };\r\n\r\n    collide.prototype.move = function(x, y) {\r\n      this.x += x;\r\n      this.y += y;\r\n      if (this.findCollisions().length > 0) {\r\n        this.x -= x;\r\n        this.y -= y;\r\n        if (Math.abs(x) < 1 && Math.abs(y) < 1) {\r\n          return false;\r\n        }\r\n        if (this.move(~~(x / 2), ~~(y / 2))) {\r\n          if (!this.move(~~(x / 2), ~~(y / 2))) {\r\n            return false;\r\n          } else {\r\n            return true;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      } else {\r\n        return true;\r\n      }\r\n    };\r\n\r\n    return collide;\r\n\r\n  })();\r\n\r\n  c.layer = (function(_super) {\r\n\r\n    __extends(layer, _super);\r\n\r\n    function layer() {\r\n      return layer.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    layer.prototype.onadd = function() {\r\n      var _ref, _ref1, _ref10, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\r\n      if ((_ref = this.width) == null) {\r\n        this.width = this.image.width;\r\n      }\r\n      if ((_ref1 = this.height) == null) {\r\n        this.height = this.image.height;\r\n      }\r\n      if ((_ref2 = this.x) == null) {\r\n        this.x = 0;\r\n      }\r\n      if ((_ref3 = this.y) == null) {\r\n        this.y = 0;\r\n      }\r\n      if ((_ref4 = this.opacity) == null) {\r\n        this.opacity = 255;\r\n      }\r\n      if ((_ref5 = this.angle) == null) {\r\n        this.angle = 0;\r\n      }\r\n      this.xOffset = this.yOffset = 0;\r\n      if (this.scaleFactor) {\r\n        this.scale(this.scaleFactor);\r\n      }\r\n      if ((_ref6 = this.repeatX) == null) {\r\n        this.repeatX = false;\r\n      }\r\n      if ((_ref7 = this.repeatY) == null) {\r\n        this.repeatY = false;\r\n      }\r\n      if ((_ref8 = this.scrollY) == null) {\r\n        this.scrollY = false;\r\n      }\r\n      if ((_ref9 = this.scrollX) == null) {\r\n        this.scrollX = true;\r\n      }\r\n      return (_ref10 = this.speed) != null ? _ref10 : this.speed = 0;\r\n    };\r\n\r\n    layer.prototype.draw = function(x, y) {\r\n      var r, rect;\r\n      if (x == null) {\r\n        x = 0;\r\n      }\r\n      if (y == null) {\r\n        y = 0;\r\n      }\r\n      rect = this.parent.rect();\r\n      r = math.round;\r\n      if (!(x > 0 || y > 0)) {\r\n        if (this.scrollX) {\r\n          this.x = math.round(rect.x * this.speed);\r\n        }\r\n        if (this.scrollY) {\r\n          this.y = math.round(rect.y * this.speed);\r\n        }\r\n      }\r\n      c = this.parent.context;\r\n      c.save();\r\n      c.rotate(this.angle * Math.PI / 180);\r\n      c.globalAlpha = this.opacity;\r\n      c.translate(r(this.x + x), r(this.y + y));\r\n      c.drawImage(this.image, 0, 0, this.width, this.height);\r\n      c.restore();\r\n      if (this.repeatX && this.x + this.width + x < rect.x + rect.width) {\r\n        this.draw(x + this.width, 0);\r\n      }\r\n      if (this.repeatY && this.y + this.height + y < rect.y + rect.height) {\r\n        return this.draw(0, y + this.height);\r\n      }\r\n    };\r\n\r\n    return layer;\r\n\r\n  })(c.sprite);\r\n\r\n  c.tween = (function() {\r\n    var applytweens;\r\n\r\n    function tween() {}\r\n\r\n    tween.prototype.onadd = function() {\r\n      this.tweening = false;\r\n      this.tweens = [];\r\n      return this.updates.push(applytweens);\r\n    };\r\n\r\n    tween.prototype.onremove = function() {\r\n      return util.remove(this.updates, applytweens);\r\n    };\r\n\r\n    tween.prototype.tween = function(props, time, cb) {\r\n      this.tweens.push(new Tween(this, props, time, cb));\r\n      return this;\r\n    };\r\n\r\n    applytweens = function() {\r\n      var tween, _i, _len, _ref, _results;\r\n      _ref = this.tweens;\r\n      _results = [];\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        tween = _ref[_i];\r\n        if (!tween.run()) {\r\n          _results.push(util.remove(this.tweens, tween));\r\n        } else {\r\n          _results.push(void 0);\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    return tween;\r\n\r\n  })();\r\n\r\n  Tween = (function() {\r\n\r\n    function Tween(en, props, time, func, cb) {\r\n      var prop, val, _ref;\r\n      this.en = en;\r\n      this.props = props;\r\n      this.cb = cb;\r\n      this.func = func || function(t, b, c, d) {\r\n        return b + c * (t / d);\r\n      };\r\n      this.d = time * 60;\r\n      this.t = 0;\r\n      this.b = {};\r\n      this.c = {};\r\n      _ref = this.props;\r\n      for (prop in _ref) {\r\n        val = _ref[prop];\r\n        if (!(isNaN(val) || isNaN(this.en[prop]))) {\r\n          this.c[prop] = val - this.en[prop];\r\n          this.b[prop] = this.en[prop];\r\n        } else {\r\n          log(2, \"Cannot tween \" + prop + \" as only numerics can be tweened\");\r\n        }\r\n      }\r\n    }\r\n\r\n    Tween.prototype.run = function() {\r\n      var prop, val, _ref;\r\n      _ref = this.c;\r\n      for (prop in _ref) {\r\n        val = _ref[prop];\r\n        this.en[prop] = this.func(this.t, this.b[prop], this.c[prop], this.d);\r\n      }\r\n      if (this.t++ === this.d) {\r\n        if (this.cb != null) {\r\n          this.cb();\r\n        }\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    };\r\n\r\n    return Tween;\r\n\r\n  })();\r\n\r\n  physics = {};\r\n\r\n  b = {};\r\n\r\n  physics.behavior = b;\r\n\r\n  physics.intergrate = intergrate = function(e, dt) {\r\n    var d;\r\n    if (e.still()) {\r\n      return;\r\n    }\r\n    d = [];\r\n    v.scale(e.acc, 10000 / e.mass, e.acc);\r\n    v.add(v.scale(e.vel, dt, []), v.scale(e.acc, 0.5 * dt * dt, []), d);\r\n    v.add(e.vel, v.scale(e.acc, dt, []), e.vel);\r\n    e.move(d[0], d[1]);\r\n    v.scale(e.vel, 1 - (e.friction / 5), e.vel);\r\n    return e.acc = [0, 0];\r\n  };\r\n\r\n  sqrt = Math.sqrt;\r\n\r\n  v = {\r\n    add: function(a, b, c) {\r\n      c[0] = a[0] + b[0];\r\n      c[1] = a[1] + b[1];\r\n      return c;\r\n    },\r\n    sub: function(a, b, c) {\r\n      c[0] = a[0] - b[0];\r\n      c[1] = a[1] - b[1];\r\n      return c;\r\n    },\r\n    dir: function(a, b, c) {\r\n      var dx, dy, l;\r\n      dx = b[0] - a[0];\r\n      dy = b[1] - a[1];\r\n      l = 1 / (sqrt(dx * dx + dy * dy));\r\n      c[0] = dx * l;\r\n      c[1] = dy * l;\r\n      return c;\r\n    },\r\n    scale: function(a, b, c) {\r\n      c[0] = a[0] * b;\r\n      c[1] = a[1] * b;\r\n      return c;\r\n    },\r\n    proj: function(a, b, c) {\r\n      var dpb;\r\n      dpb = (a[0] * b[0] + a[1] * b[1]) / (b[0] * b[0] + b[1] * b[1]);\r\n      c[0] = dpb * b[0];\r\n      c[1] = dpb * b[1];\r\n      return c;\r\n    },\r\n    dot: function(a, b) {\r\n      return a[0] * b[0] + a[1] * b[1];\r\n    },\r\n    cross: function(a, b) {\r\n      return (a[0] * b[0]) - (a[1] * b[1]);\r\n    },\r\n    dist: function(a, b) {\r\n      var dx, dy;\r\n      dx = b[0] - a[0];\r\n      dy = b[1] - a[1];\r\n      return sqrt(dx * dx + dy * dy);\r\n    },\r\n    distSq: function(a, b) {\r\n      var dx, dy;\r\n      dx = b[0] - a[0];\r\n      dy = b[1] - a[1];\r\n      return dx * dx + dy * dy;\r\n    },\r\n    norm: function(a, c) {\r\n      var m;\r\n      m = sqrt(a[0] * a[0] + a[1] * a[1]);\r\n      c[0] = a[0] / m;\r\n      c[1] = a[1] / m;\r\n      return c;\r\n    },\r\n    clone: function(a, c) {\r\n      return c = a.slice(0);\r\n    },\r\n    neg: function(a, c) {\r\n      c[0] = -a[0];\r\n      return c[1] = -a[1](c);\r\n    },\r\n    mag: function(a) {\r\n      return sqrt(a[0] * a[0] + a[1] * a[1]);\r\n    },\r\n    magSq: function(a) {\r\n      return a[0] * a[0] + a[1] * a[1];\r\n    }\r\n  };\r\n\r\n  c.physics = (function() {\r\n\r\n    function physics() {}\r\n\r\n    physics.prototype.onadd = function() {\r\n      var _ref, _ref1, _ref2, _ref3;\r\n      this.components.add([\"move\", \"collide\"]);\r\n      this.behavior = new Importer(Rogue.physics.behavior, this, false);\r\n      this.behavior.add(\"collide\");\r\n      this.updates.push(function(dt) {\r\n        var behave, name, _ref;\r\n        _ref = this.behavior;\r\n        for (name in _ref) {\r\n          behave = _ref[name];\r\n          if (behave.run != null) {\r\n            behave.run.call(this, dt);\r\n          }\r\n        }\r\n        return this.intergrate(dt);\r\n      });\r\n      if ((_ref = this.vel) == null) {\r\n        this.vel = [0, 0];\r\n      }\r\n      if ((_ref1 = this.acc) == null) {\r\n        this.acc = [0, 0];\r\n      }\r\n      this.old = {};\r\n      if ((_ref2 = this.friction) == null) {\r\n        this.friction = 0;\r\n      }\r\n      if ((_ref3 = this.mass) == null) {\r\n        this.mass = 1;\r\n      }\r\n      return this.solid = false;\r\n    };\r\n\r\n    physics.prototype.intergrate = function(dt) {\r\n      var i, _results;\r\n      i = 0;\r\n      _results = [];\r\n      while (i++ < 8) {\r\n        _results.push(intergrate(this, dt / 8));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    physics.prototype.still = function() {\r\n      return this.vel[0] === 0 && this.vel[1] === 0 && this.acc[0] === 0 && this.acc[1] === 0;\r\n    };\r\n\r\n    return physics;\r\n\r\n  })();\r\n\r\n  b.gravity = (function() {\r\n\r\n    function gravity() {}\r\n\r\n    gravity.prototype.run = function() {\r\n      if (this.acc[1] < 9.8) {\r\n        this.acc[1]++;\r\n        if (this.acc[1] > 9.8) {\r\n          return this.acc[1] = 9.8;\r\n        }\r\n      }\r\n    };\r\n\r\n    return gravity;\r\n\r\n  })();\r\n\r\n  b.collide = (function() {\r\n    var responce;\r\n\r\n    function collide() {}\r\n\r\n    responce = function(col) {\r\n      if (col.e2.solid) {\r\n        if (col.dir === \"left\" || col.dir === \"right\") {\r\n          return this.vel[0] = 0;\r\n        } else {\r\n          return this.vel[1] = 0;\r\n        }\r\n      }\r\n    };\r\n\r\n    collide.prototype.onadd = function() {\r\n      return this.ev.on(\"hit\", responce);\r\n    };\r\n\r\n    collide.prototype.onremove = function() {\r\n      return this.ev.off(\"hit\", responce);\r\n    };\r\n\r\n    return collide;\r\n\r\n  })();\r\n\r\n  TileMap = (function() {\r\n\r\n    function TileMap(options) {\r\n      var calc, d, dirs, x, y, _i, _j, _ref, _ref1;\r\n      if (options == null) {\r\n        options = {};\r\n      }\r\n      this.x = options.x || 0;\r\n      this.y = options.y || 0;\r\n      this.res = options.res || [32, 32];\r\n      this.size = options.size || [100, 100];\r\n      this.parent = options.parent;\r\n      if (options.name) {\r\n        this.name = options.name;\r\n      }\r\n      this.components = {};\r\n      this.width = this.size[0] * this.res[0];\r\n      this.height = this.size[1] * this.res[1];\r\n      this.tiles = (function() {\r\n        var _i, _ref, _results;\r\n        _results = [];\r\n        for (y = _i = 0, _ref = this.size[0]; 0 <= _ref ? _i < _ref : _i > _ref; y = 0 <= _ref ? ++_i : --_i) {\r\n          _results.push((function() {\r\n            var _j, _ref1, _results1;\r\n            _results1 = [];\r\n            for (x = _j = 0, _ref1 = this.size[1]; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; x = 0 <= _ref1 ? ++_j : --_j) {\r\n              _results1.push({\r\n                parent: this\r\n              });\r\n            }\r\n            return _results1;\r\n          }).call(this));\r\n        }\r\n        return _results;\r\n      }).call(this);\r\n      dirs = {\r\n        s: [0, 1],\r\n        e: [1, 0],\r\n        n: [0, -1],\r\n        w: [-1, 0]\r\n      };\r\n      for (y = _i = 0, _ref = this.size[1]; 0 <= _ref ? _i < _ref : _i > _ref; y = 0 <= _ref ? ++_i : --_i) {\r\n        for (x = _j = 0, _ref1 = this.size[0]; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; x = 0 <= _ref1 ? ++_j : --_j) {\r\n          this.tiles[x][y].x = x;\r\n          this.tiles[x][y].y = y;\r\n          this.tiles[x][y].content = [];\r\n          for (d in dirs) {\r\n            calc = dirs[d];\r\n            this.tiles[x][y][d] = (this.tiles[x + calc[0]] != null) && (this.tiles[x + calc[0]][y + calc[1]] != null) ? this.tiles[x + calc[0]][y + calc[1]] : null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    TileMap.prototype.place = function(obj) {\r\n      var _this = this;\r\n      if (obj.forEach) {\r\n        return obj.forEach(function(item) {\r\n          return _this.place(item);\r\n        });\r\n      } else {\r\n        this.parent.e.push(obj);\r\n        obj.tile = this.tiles[obj.x][obj.y];\r\n        obj.parent = this.parent;\r\n        this.tiles[obj.x][obj.y].content.unshift(obj);\r\n        obj.x = obj.x * this.res[0] + this.x;\r\n        return obj.y = obj.y * this.res[1] + this.y;\r\n      }\r\n    };\r\n\r\n    TileMap.prototype.lookup = function(x, y) {\r\n      return this.tiles[x][y].content;\r\n    };\r\n\r\n    TileMap.prototype.clear = function() {\r\n      var col, tile, _i, _len, _ref, _results;\r\n      _ref = this.tiles;\r\n      _results = [];\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        col = _ref[_i];\r\n        _results.push((function() {\r\n          var _j, _len1, _results1;\r\n          _results1 = [];\r\n          for (_j = 0, _len1 = col.length; _j < _len1; _j++) {\r\n            tile = col[_j];\r\n            _results1.push(tile.content = []);\r\n          }\r\n          return _results1;\r\n        })());\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    TileMap.prototype.atRect = function(rect) {\r\n      var round, tiles, x, x1, x2, y, y1, y2, _i, _j, _ref;\r\n      tiles = [];\r\n      round = Rogue.math.round;\r\n      x1 = round(rect.x / this.res[0]);\r\n      y1 = round(rect.y / this.res[1]);\r\n      x2 = round((rect.x + rect.width) / this.res[0]);\r\n      y2 = round((rect.y + rect.height) / this.res[1]);\r\n      for (y = _i = y1; y1 <= y2 ? _i <= y2 : _i >= y2; y = y1 <= y2 ? ++_i : --_i) {\r\n        for (x = _j = x1; x1 <= x2 ? _j <= x2 : _j >= x2; x = x1 <= x2 ? ++_j : --_j) {\r\n          if (((_ref = this.tiles[x]) != null ? _ref[y] : void 0) != null) {\r\n            tiles.push(this.tiles[x][y].content);\r\n          }\r\n        }\r\n      }\r\n      return tiles;\r\n    };\r\n\r\n    TileMap.prototype.rect = function() {\r\n      return this;\r\n    };\r\n\r\n    return TileMap;\r\n\r\n  })();\r\n\r\n  Keyboard = (function() {\r\n    var chr, downFn, i, keys, num, pressedKeys, upFn, _i, _j, _len, _ref;\r\n\r\n    function Keyboard(context) {\r\n      var handleEvent,\r\n        _this = this;\r\n      this.context = context;\r\n      handleEvent = function(e) {\r\n        var fn, key, _ref;\r\n        e = e || window.event;\r\n        if (e.type === 'keyup') {\r\n          key = false;\r\n          fn = upFn;\r\n        } else {\r\n          key = true;\r\n          fn = downFn;\r\n        }\r\n        pressedKeys[e.keyCode] = key;\r\n        if (_ref = e.keyCode, __indexOf.call(fn, _ref) >= 0) {\r\n          fn[e.keyCode]();\r\n        }\r\n        return e.preventDefault();\r\n      };\r\n      this.context.onkeydown = this.context.onkeyup = handleEvent;\r\n    }\r\n\r\n    Keyboard.prototype.press = function(key, fn) {\r\n      var k, _i, _len, _results;\r\n      if (key.forEach) {\r\n        _results = [];\r\n        for (_i = 0, _len = key.length; _i < _len; _i++) {\r\n          k = key[_i];\r\n          _results.push(this.press(k, fn));\r\n        }\r\n        return _results;\r\n      } else {\r\n        if (keys[key] != null) {\r\n          return downFn[keys[key]] = fn;\r\n        } else {\r\n          return Rogue.log(3, \"invalid key: \" + key);\r\n        }\r\n      }\r\n    };\r\n\r\n    Keyboard.prototype.release = function(key, fn) {\r\n      var k, _i, _len, _results;\r\n      if (key.forEach) {\r\n        _results = [];\r\n        for (_i = 0, _len = key.length; _i < _len; _i++) {\r\n          k = key[_i];\r\n          _results.push(this.release(k, fn));\r\n        }\r\n        return _results;\r\n      } else {\r\n        if (keys[key] != null) {\r\n          return upFn[keys[key]] = fn;\r\n        } else {\r\n          return Rogue.log(3, \"invalid key: \" + key);\r\n        }\r\n      }\r\n    };\r\n\r\n    Keyboard.prototype.pressed = function(key) {\r\n      if (keys[key] != null) {\r\n        return pressedKeys[keys[key]];\r\n      } else {\r\n        return Rogue.log(3, \"invalid key: \" + key);\r\n      }\r\n    };\r\n\r\n    downFn = [];\r\n\r\n    upFn = [];\r\n\r\n    pressedKeys = [];\r\n\r\n    keys = {\r\n      backspace: 8,\r\n      tab: 9,\r\n      enter: 13,\r\n      shift: 16,\r\n      ctrl: 17,\r\n      alt: 18,\r\n      pause: 19,\r\n      capslock: 20,\r\n      escape: 27,\r\n      space: 32,\r\n      pageup: 33,\r\n      pagedown: 34,\r\n      end: 35,\r\n      home: 36,\r\n      left: 37,\r\n      up: 38,\r\n      right: 39,\r\n      down: 40,\r\n      insert: 45,\r\n      'delete': 46,\r\n      leftwin: 91,\r\n      rightwin: 92,\r\n      multiply: 106,\r\n      add: 107,\r\n      subtract: 109,\r\n      decimalpoint: 110,\r\n      divide: 111,\r\n      numlock: 144,\r\n      scrollock: 145,\r\n      semicolon: 186,\r\n      equals: 187,\r\n      comma: 188,\r\n      dash: 189,\r\n      period: 190,\r\n      forwardslash: 191,\r\n      backtick: 192,\r\n      openbracket: 219,\r\n      backslash: 220,\r\n      closebracket: 221,\r\n      quote: 222\r\n    };\r\n\r\n    for (num = _i = 0; _i < 10; num = ++_i) {\r\n      keys['' + num] = 48 + num;\r\n      keys['numpad' + num] = 96 + num;\r\n      keys['f' + num] = 112 + num;\r\n    }\r\n\r\n    _ref = 'abcdefghijklmnopqrstuvwxyz';\r\n    for (i = _j = 0, _len = _ref.length; _j < _len; i = ++_j) {\r\n      chr = _ref[i];\r\n      keys[chr] = 65 + i;\r\n    }\r\n\r\n    return Keyboard;\r\n\r\n  })();\r\n\r\n  Mouse = (function() {\r\n\r\n    function Mouse(context) {\r\n      var a, actions, buttons, listener, mousemove, _i, _j, _k, _len, _len1, _len2,\r\n        _this = this;\r\n      this.context = context;\r\n      this.context.oncontextmenu = function() {\r\n        return false;\r\n      };\r\n      buttons = [\"left\", \"middle\", \"right\"];\r\n      actions = [\"click\", \"down\", \"up\"];\r\n      mousemove = function(e) {\r\n        e = e || window.event;\r\n        _this.x = e.offsetX;\r\n        return _this.y = e.offsetX;\r\n      };\r\n      for (_i = 0, _len = buttons.length; _i < _len; _i++) {\r\n        b = buttons[_i];\r\n        this[b] = {};\r\n        for (_j = 0, _len1 = actions.length; _j < _len1; _j++) {\r\n          a = actions[_j];\r\n          this[b][a] = function() {};\r\n        }\r\n      }\r\n      for (_k = 0, _len2 = actions.length; _k < _len2; _k++) {\r\n        a = actions[_k];\r\n        listener = a === \"click\" ? \"onclick\" : \"onmouse\" + a;\r\n        this.context[listener] = function(e) {\r\n          e = e || window.event;\r\n          _this.context.focus();\r\n          _this[buttons[e.button]][e.type.replace(\"mouse\", \"\")].call(_this, e);\r\n          return e.preventDefault();\r\n        };\r\n      }\r\n      this.context.onmousemove = mousemove;\r\n    }\r\n\r\n    return Mouse;\r\n\r\n  })();\r\n\r\n  collision = {\r\n    AABB: function(r1, r2) {\r\n      var dir, dx, dy, h, hx, px, py, w, wy;\r\n      w = (r1.width + r2.width) / 2;\r\n      h = (r1.height + r2.height) / 2;\r\n      dx = (r1.x + r1.width / 2) - (r2.x + r2.width / 2);\r\n      dy = (r1.y + r1.height / 2) - (r2.y + r2.height / 2);\r\n      if (Math.abs(dx) <= w && Math.abs(dy) <= h) {\r\n        wy = w * dy;\r\n        hx = h * dx;\r\n        if (wy > hx) {\r\n          if (wy > -hx) {\r\n            dir = \"top\";\r\n          } else {\r\n            dir = \"left\";\r\n          }\r\n        } else {\r\n          if (wy > -hx) {\r\n            dir = \"right\";\r\n          } else {\r\n            dir = \"bottom\";\r\n          }\r\n        }\r\n        px = w - (dx < 0 ? -dx : dx);\r\n        py = h - (dy < 0 ? -dy : dy);\r\n        return {\r\n          \"dir\": dir,\r\n          \"pv\": [(dx < 0 ? -px : px), (dy < 0 ? -py : py)]\r\n        };\r\n      }\r\n      return false;\r\n    },\r\n    hitTest: function(p, r) {\r\n      return this.AABB({\r\n        x: p[0],\r\n        y: p[1],\r\n        width: 1,\r\n        height: 1\r\n      }, r);\r\n    },\r\n    AABBhitmap: function(r, e) {\r\n      var dir, p, points, _i, _len, _ref;\r\n      if (!collision.AABB(r, e.rect())) {\r\n        return false;\r\n      }\r\n      _ref = e.hitmap;\r\n      for (dir in _ref) {\r\n        points = _ref[dir];\r\n        for (_i = 0, _len = points.length; _i < _len; _i++) {\r\n          p = points[_i];\r\n          dir = this.hitTest([e.x + p[0], e.y + p[1]], r);\r\n          if (dir) {\r\n            return dir;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    createHitmap: function(img, res) {\r\n      var hitmap, point, points, _i, _len, _step;\r\n      if (res == null) {\r\n        res = 2;\r\n      }\r\n      points = gfx.edgeDetect(img, res);\r\n      hitmap = {\r\n        left: [],\r\n        right: [],\r\n        up: [],\r\n        down: []\r\n      };\r\n      for (_i = 0, _len = points.length, _step = res; _i < _len; _i += _step) {\r\n        point = points[_i];\r\n        hitmap[point[2]].push([point[0], point[1]]);\r\n      }\r\n      return hitmap;\r\n    }\r\n  };\r\n\r\n  collision.SpatialHash = (function() {\r\n\r\n    function SpatialHash(cellsize) {\r\n      this.cellsize = cellsize;\r\n      this.h = {};\r\n    }\r\n\r\n    SpatialHash.prototype.add = function(entity) {\r\n      var ex, ey, hash, rect, rx, rxw, ry, ryh, x, y, _base, _ref, _results;\r\n      rect = entity.rect();\r\n      rx = Math.floor(rect.x);\r\n      ry = Math.floor(rect.y);\r\n      rxw = Math.floor(rx + rect.width);\r\n      ryh = Math.floor(ry + rect.height);\r\n      x = rx - rx % this.cellsize;\r\n      ex = rxw - (rxw % this.cellsize);\r\n      ey = ryh - (ryh % this.cellsize);\r\n      _results = [];\r\n      while (x <= ex) {\r\n        y = ry - ry % this.cellsize;\r\n        while (y <= ey) {\r\n          hash = \"x\" + x + \"y\" + y;\r\n          if ((_ref = (_base = this.h)[hash]) == null) {\r\n            _base[hash] = [];\r\n          }\r\n          this.h[hash].push(entity);\r\n          y += this.cellsize;\r\n        }\r\n        _results.push(x += this.cellsize);\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    SpatialHash.prototype.find = function(entity) {\r\n      var cell, e, hash, matches, _i, _len, _ref;\r\n      matches = [];\r\n      _ref = this.h;\r\n      for (hash in _ref) {\r\n        cell = _ref[hash];\r\n        if (__indexOf.call(cell, entity) >= 0) {\r\n          for (_i = 0, _len = cell.length; _i < _len; _i++) {\r\n            e = cell[_i];\r\n            if (e !== entity) {\r\n              matches.push(e);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return matches;\r\n    };\r\n\r\n    SpatialHash.prototype.reset = function() {\r\n      this.clear();\r\n      return this.obj = [];\r\n    };\r\n\r\n    SpatialHash.prototype.clear = function() {\r\n      return this.h = {};\r\n    };\r\n\r\n    return SpatialHash;\r\n\r\n  })();\r\n\r\n  c.AABB = (function() {\r\n\r\n    function AABB() {}\r\n\r\n    AABB.prototype.type = \"AABB\";\r\n\r\n    AABB.prototype.collide = function(obj) {\r\n      var col,\r\n        _this = this;\r\n      if (obj.forEach) {\r\n        obj.forEach(function(o) {\r\n          return _this.collide(o);\r\n        });\r\n      }\r\n      if (obj.type === this.type) {\r\n        col = collision.AABB(this.rect(), obj.rect());\r\n        col.e1 = this;\r\n        col.e2 = obj;\r\n        return col;\r\n      } else if (obj.type === \"hitmap\") {\r\n        col = {};\r\n        col.e1 = this;\r\n        col.e2 = obj;\r\n        col.dir = collision.AABBhitmap(this.rect(), obj);\r\n      }\r\n      return false;\r\n    };\r\n\r\n    return AABB;\r\n\r\n  })();\r\n\r\n  c.hitmap = (function() {\r\n\r\n    function hitmap() {}\r\n\r\n    hitmap.prototype.type = \"hitmap\";\r\n\r\n    hitmap.prototype.onadd = function() {\r\n      return this.recalculateImage();\r\n    };\r\n\r\n    hitmap.prototype.recalculateImage = function() {\r\n      this.width = this.image.width;\r\n      this.height = this.image.height;\r\n      this.xOffset = math.round(this.width / 2);\r\n      this.yOffset = math.round(this.height / 2);\r\n      return this.hitmap = collision.createHitmap(this.image);\r\n    };\r\n\r\n    hitmap.prototype.collide = function(obj) {\r\n      var dir, dir2, opoint, point, points, points2, _i, _j, _k, _len, _len1, _len2, _ref, _ref1,\r\n        _this = this;\r\n      if (obj.forEach) {\r\n        obj.forEach(function(o) {\r\n          return _this.collide(o);\r\n        });\r\n      }\r\n      if (!collision.AABB(this.rect(), obj.rect())) {\r\n        return false;\r\n      }\r\n      if (obj.type === this.type) {\r\n        _ref = obj.hitmap;\r\n        for (dir in _ref) {\r\n          points = _ref[dir];\r\n          for (_i = 0, _len = points.length; _i < _len; _i++) {\r\n            opoint = points[_i];\r\n            _ref1 = this.hitmap;\r\n            for (points2 = _j = 0, _len1 = _ref1.length; _j < _len1; points2 = ++_j) {\r\n              dir2 = _ref1[points2];\r\n              for (_k = 0, _len2 = points2.length; _k < _len2; _k++) {\r\n                point = points2[_k];\r\n                if (opoint[0] + obj.x === point[0] + this.x && opoint[1] + obj.y === point[1] + this.y) {\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return false;\r\n      } else if (obj.type === \"AABB\") {\r\n        return collision.AABBhitmap(obj.rect(), this);\r\n      }\r\n    };\r\n\r\n    return hitmap;\r\n\r\n  })();\r\n\r\n  c.polygon = (function() {\r\n\r\n    function polygon() {}\r\n\r\n    polygon.prototype.type = \"polygon\";\r\n\r\n    polygon.prototype.onadd = function() {\r\n      if (!this.points) {\r\n        return log(2, \"Polygons must have points!\");\r\n      }\r\n    };\r\n\r\n    return polygon;\r\n\r\n  })();\r\n\r\n  Game = (function() {\r\n\r\n    function Game(options) {\r\n      var _ref, _ref1, _ref2;\r\n      this.options = options != null ? options : {};\r\n      if (this.options.canvas != null) {\r\n        this.canvas = document.getElementById(options.canvas);\r\n      }\r\n      if (!(this.canvas != null)) {\r\n        this.canvas = util.canvas();\r\n        document.body.appendChild(this.canvas);\r\n      }\r\n      this.canvas.tabIndex = 0;\r\n      this.canvas.style.outline = \"none\";\r\n      this.width = this.canvas.width = (_ref = this.options.width) != null ? _ref : 400;\r\n      this.height = this.canvas.height = (_ref1 = this.options.height) != null ? _ref1 : 300;\r\n      this.showFPS = (_ref2 = this.options.fps) != null ? _ref2 : false;\r\n      this.canvas.x = this.canvas.y = 0;\r\n      this.context = this.canvas.getContext('2d');\r\n    }\r\n\r\n    Game.prototype.start = function(state) {\r\n      var loading, _ref;\r\n      loading = (_ref = this.options.loadingScreen) != null ? _ref : function() {};\r\n      return this.switchState(state);\r\n    };\r\n\r\n    Game.prototype.switchState = function(state) {\r\n      this.e = [];\r\n      this.loop && this.loop.stop();\r\n      this.oldState = this.state;\r\n      this.state = state;\r\n      this.state.setup.call(this.state, this);\r\n      this.loop = new GameLoop(this, this.showFPS);\r\n      this.loop.add([this.state.update, this.state.draw]);\r\n      return this.loop.start();\r\n    };\r\n\r\n    Game.prototype.clear = function() {\r\n      return this.context.clearRect(0, 0, this.width, this.height);\r\n    };\r\n\r\n    Game.prototype.find = function(components, ex) {\r\n      return find.call(this, components, ex);\r\n    };\r\n\r\n    return Game;\r\n\r\n  })();\r\n\r\n  GameLoop = (function() {\r\n\r\n    function GameLoop(parent, showFPS) {\r\n      this.parent = parent;\r\n      this.showFPS = showFPS;\r\n      this.loop = __bind(this.loop, this);\r\n\r\n      this.fps = 0;\r\n      this.averageFPS = new RollingAverage(20);\r\n      this.call = [];\r\n    }\r\n\r\n    GameLoop.prototype.start = function() {\r\n      var currentTick, firstTick, lastTick;\r\n      this.paused = this.stopped = false;\r\n      firstTick = currentTick = lastTick = (new Date()).getTime();\r\n      return Rogue.ticker.call(window, this.loop);\r\n    };\r\n\r\n    GameLoop.prototype.loop = function() {\r\n      var func, _i, _len, _ref;\r\n      this.currentTick = (new Date()).getTime();\r\n      this.dt = (this.currentTick - this.lastTick) || 17;\r\n      this.fps = this.averageFPS.add(1000 / this.dt);\r\n      if (!(this.stopped || this.paused)) {\r\n        if (this.dt > 20) {\r\n          this.dt = 17;\r\n        }\r\n        _ref = this.call;\r\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n          func = _ref[_i];\r\n          func.call(this.parent.state, this.parent, this.dt / 1000);\r\n        }\r\n      }\r\n      if (!this.stopped) {\r\n        Rogue.ticker.call(window, this.loop);\r\n      }\r\n      if (this.showFPS) {\r\n        this.parent.context.fillText(\"fps:\" + this.fps + \" step:\" + this.dt, 10, 10);\r\n      }\r\n      return this.lastTick = this.currentTick;\r\n    };\r\n\r\n    GameLoop.prototype.pause = function() {\r\n      return this.paused = !this.paused;\r\n    };\r\n\r\n    GameLoop.prototype.stop = function() {\r\n      return this.stopped = true;\r\n    };\r\n\r\n    GameLoop.prototype.add = function(func) {\r\n      return this.call = this.call.concat(func);\r\n    };\r\n\r\n    return GameLoop;\r\n\r\n  })();\r\n\r\n  RollingAverage = (function() {\r\n\r\n    function RollingAverage(size) {\r\n      this.size = size;\r\n      this.values = new Array(this.size);\r\n      this.count = 0;\r\n    }\r\n\r\n    RollingAverage.prototype.add = function(value) {\r\n      this.values = this.values.slice(1, this.size);\r\n      this.values.push(value);\r\n      if (this.count < this.size) {\r\n        this.count++;\r\n      }\r\n      return ((this.values.reduce(function(t, s) {\r\n        return t + s;\r\n      })) / this.count) | 0;\r\n    };\r\n\r\n    return RollingAverage;\r\n\r\n  })();\r\n\r\n  ViewPort = (function() {\r\n\r\n    function ViewPort(options) {\r\n      var updateHash;\r\n      this.options = options;\r\n      this.parent = this.options.parent;\r\n      this.canvas = this.options.canvas || this.parent.canvas || util.canvas();\r\n      this.context = this.canvas.getContext('2d');\r\n      this.width = this.options.width || this.canvas.width;\r\n      this.height = this.options.height || this.canvas.height;\r\n      this.viewWidth = this.options.viewWidth || this.width;\r\n      this.viewHeight = this.options.viewHeight || this.height;\r\n      this.viewX = this.options.viewX || 0;\r\n      this.viewY = this.options.viewY || 0;\r\n      this.x = this.options.x || 0;\r\n      this.y = this.options.y || 0;\r\n      this.e = [];\r\n      this.hashmap = new collision.SpatialHash(64);\r\n      updateHash = function() {\r\n        var ent, solid, _i, _len, _results;\r\n        solid = this.find([\"collide\"]);\r\n        this.hashmap.clear();\r\n        _results = [];\r\n        for (_i = 0, _len = solid.length; _i < _len; _i++) {\r\n          ent = solid[_i];\r\n          _results.push(this.hashmap.add(ent));\r\n        }\r\n        return _results;\r\n      };\r\n      this.updates = [updateHash];\r\n    }\r\n\r\n    ViewPort.prototype.add = function(entity) {\r\n      var _this = this;\r\n      if (entity.forEach) {\r\n        return entity.forEach(function(obj) {\r\n          return _this.add(obj);\r\n        });\r\n      } else {\r\n        entity.parent = this;\r\n        this.e.push(entity);\r\n        this.parent.e.push(entity);\r\n        if (entity.name != null) {\r\n          return this[entity.name] = entity;\r\n        }\r\n      }\r\n    };\r\n\r\n    ViewPort.prototype.remove = function(entity) {\r\n      var _this = this;\r\n      if (entity.forEach) {\r\n        return entity.forEach(function(obj) {\r\n          return _this.remove(obj);\r\n        });\r\n      } else {\r\n        if (entity.name != null) {\r\n          delete this[entity.name];\r\n        }\r\n        util.remove(this.e, entity);\r\n        util.remove(this.parent.e, entity);\r\n        return delete entity.parent;\r\n      }\r\n    };\r\n\r\n    ViewPort.prototype.update = function(dt) {\r\n      var entity, func, _i, _j, _len, _len1, _ref, _ref1, _results;\r\n      _ref = this.updates;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        func = _ref[_i];\r\n        if (func != null) {\r\n          func.call(this, dt);\r\n        }\r\n      }\r\n      _ref1 = this.e;\r\n      _results = [];\r\n      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\r\n        entity = _ref1[_j];\r\n        if (this.close(entity) && (entity.update != null)) {\r\n          _results.push(entity.update(dt));\r\n        } else {\r\n          _results.push(void 0);\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    ViewPort.prototype.draw = function() {\r\n      var entity, _i, _len, _ref;\r\n      this.context.save();\r\n      this.context.translate(-this.viewX, -this.viewY);\r\n      this.context.beginPath();\r\n      this.context.rect(this.x + this.viewX, this.y + this.viewY, this.width, this.height);\r\n      this.context.clip();\r\n      _ref = this.e;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        entity = _ref[_i];\r\n        if (this.visible(entity) && (entity.draw != null)) {\r\n          entity.draw();\r\n        }\r\n      }\r\n      return this.context.restore();\r\n    };\r\n\r\n    ViewPort.prototype.move = function(x, y) {\r\n      this.viewX += x;\r\n      this.viewY += y;\r\n      return this.keepInBounds();\r\n    };\r\n\r\n    ViewPort.prototype.moveTo = function(x, y) {\r\n      this.viewX = x;\r\n      this.viewY = y;\r\n      return this.keepInBounds();\r\n    };\r\n\r\n    ViewPort.prototype.follow = function(entity) {\r\n      this.viewX = entity.x - math.round(this.width / 2);\r\n      this.viewY = entity.y - math.round(this.height / 2);\r\n      return this.keepInBounds();\r\n    };\r\n\r\n    ViewPort.prototype.forceInside = function(entity, buffer) {\r\n      var h, w;\r\n      if (buffer == null) {\r\n        buffer = 0;\r\n      }\r\n      w = this.viewWidth;\r\n      h = this.viewHeight;\r\n      if (entity.x < buffer) {\r\n        entity.x = buffer;\r\n      }\r\n      if (entity.y < buffer) {\r\n        entity.y = buffer;\r\n      }\r\n      if (entity.x > w - buffer) {\r\n        entity.x = w - buffer;\r\n      }\r\n      if (entity.y > h - buffer) {\r\n        return entity.y = h - buffer;\r\n      }\r\n    };\r\n\r\n    ViewPort.prototype.rect = function() {\r\n      return {\r\n        width: this.width,\r\n        height: this.height,\r\n        x: this.viewX,\r\n        y: this.viewY\r\n      };\r\n    };\r\n\r\n    ViewPort.prototype.visible = function(entity) {\r\n      return collision.AABB(entity.rect(), this.rect());\r\n    };\r\n\r\n    ViewPort.prototype.keepInBounds = function() {\r\n      if (this.viewX < 0) {\r\n        this.viewX = 0;\r\n      }\r\n      if (this.viewY < 0) {\r\n        this.viewY = 0;\r\n      }\r\n      if (this.viewX + this.width > this.viewWidth) {\r\n        this.viewX = this.viewWidth - this.width;\r\n      }\r\n      if (this.viewY + this.height > this.viewHeight) {\r\n        return this.viewY = this.viewHeight - this.height;\r\n      }\r\n    };\r\n\r\n    ViewPort.prototype.find = function(components, ex) {\r\n      return find.call(this, components, ex);\r\n    };\r\n\r\n    ViewPort.prototype.close = function(entity) {\r\n      return collision.AABB(entity.rect(), {\r\n        width: this.width * 2,\r\n        height: this.height * 2,\r\n        x: this.viewX - this.width / 2,\r\n        y: this.viewY - this.height / 2\r\n      });\r\n    };\r\n\r\n    return ViewPort;\r\n\r\n  })();\r\n\r\n  log = function() {\r\n    var args, func, level;\r\n    level = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n    if (!(level <= Rogue.loglevel)) {\r\n      return;\r\n    }\r\n    switch (level) {\r\n      case 1:\r\n        func = console.error || console.log;\r\n        break;\r\n      case 2:\r\n        func = console.warn || console.log;\r\n        break;\r\n      case 3:\r\n        func = console.info || console.log;\r\n        break;\r\n      case 4:\r\n        func = console.debug || console.log;\r\n    }\r\n    return func.call.apply(func, [console, \"(Rogue)\"].concat(__slice.call(args)));\r\n  };\r\n\r\n  util = {\r\n    canvas: function() {\r\n      return document.createElement(\"canvas\");\r\n    },\r\n    imgToCanvas: function(i) {\r\n      var cx;\r\n      c = this.canvas();\r\n      c.src = i.src;\r\n      c.width = i.width;\r\n      c.height = i.height;\r\n      cx = c.getContext(\"2d\");\r\n      cx.drawImage(i, 0, 0, i.width, i.height);\r\n      return c;\r\n    },\r\n    isArray: function(value) {\r\n      return Object.prototype.toString.call(value) === '[object Array]';\r\n    },\r\n    remove: function(a, val) {\r\n      var idx;\r\n      idx = a.indexOf(val);\r\n      return idx && a.splice(idx, 1);\r\n    },\r\n    mixin: function(obj, mixin) {\r\n      var method, name;\r\n      for (name in mixin) {\r\n        method = mixin[name];\r\n        if (method !== null) {\r\n          if (method.slice) {\r\n            obj[name] = method.slice(0);\r\n          } else {\r\n            obj[name] = method;\r\n          }\r\n        }\r\n      }\r\n      return obj;\r\n    },\r\n    IE: function() {\r\n      return //@cc_on navigator.appVersion;\r\n    }\r\n  };\r\n\r\n  Eventer = (function() {\r\n\r\n    function Eventer(context) {\r\n      this.context = context;\r\n      this.handlers = {};\r\n    }\r\n\r\n    Eventer.prototype.on = function(e, func) {\r\n      var _base, _ref;\r\n      return ((_ref = (_base = this.handlers)[e]) != null ? _ref : _base[e] = []).push(func);\r\n    };\r\n\r\n    Eventer.prototype.off = function(e, func) {\r\n      return this.handlers[e] && util.remove(this.handlers[e], func);\r\n    };\r\n\r\n    Eventer.prototype.emit = function() {\r\n      var data, e, handler;\r\n      e = arguments[0], data = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\r\n      return this.handlers[e] && (function() {\r\n        var _i, _len, _ref, _results;\r\n        _ref = this.handlers[e];\r\n        _results = [];\r\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n          handler = _ref[_i];\r\n          _results.push(handler.call.apply(handler, [this.context].concat(__slice.call(data))));\r\n        }\r\n        return _results;\r\n      }).call(this);\r\n    };\r\n\r\n    return Eventer;\r\n\r\n  })();\r\n\r\n  find = function(c, ex) {\r\n    var ent, f, found, i, _i, _j, _len, _len1, _ref;\r\n    found = [];\r\n    _ref = this.e;\r\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n      ent = _ref[_i];\r\n      if (!(ent !== ex)) {\r\n        continue;\r\n      }\r\n      f = 0;\r\n      for (_j = 0, _len1 = c.length; _j < _len1; _j++) {\r\n        i = c[_j];\r\n        if (ent.components[i] != null) {\r\n          f++;\r\n        }\r\n      }\r\n      if (f === c.length) {\r\n        found.push(ent);\r\n      }\r\n    }\r\n    return found;\r\n  };\r\n\r\n  math = {\r\n    round: function(num) {\r\n      return (0.5 + num) | 0;\r\n    }\r\n  };\r\n\r\n  math.vector = v;\r\n\r\n  Rogue = {};\r\n\r\n  Rogue.ticker = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(tick) {\r\n    return window.setTimeout(tick, 1000 / 60);\r\n  };\r\n\r\n  Rogue.ready = function(f) {\r\n    return document.addEventListener(\"DOMContentLoaded\", function() {\r\n      document.removeEventListener(\"DOMContentLoaded\", arguments.callee, false);\r\n      return f();\r\n    });\r\n  };\r\n\r\n  Rogue.log = log;\r\n\r\n  Rogue.util = util;\r\n\r\n  Rogue.math = math;\r\n\r\n  Rogue.physics = physics;\r\n\r\n  Rogue.Game = Game;\r\n\r\n  Rogue.GameLoop = GameLoop;\r\n\r\n  Rogue.TileMap = TileMap;\r\n\r\n  Rogue.AssetManager = AssetManager;\r\n\r\n  Rogue.SpriteSheet = SpriteSheet;\r\n\r\n  Rogue.gfx = gfx;\r\n\r\n  Rogue.collision = collision;\r\n\r\n  Rogue.Animation = Animation;\r\n\r\n  Rogue.ViewPort = ViewPort;\r\n\r\n  Rogue.components = c;\r\n\r\n  Rogue.Entity = Entity;\r\n\r\n  Rogue.Factory = Factory;\r\n\r\n  Rogue.Keyboard = Keyboard;\r\n\r\n  Rogue.Mouse = Mouse;\r\n\r\n  Rogue.loglevel = 4;\r\n\r\n  if (typeof exports === 'object') {\r\n    module.exports = Rogue;\r\n  } else if (typeof define === 'function' && define.amd) {\r\n    define(Rogue);\r\n  } else {\r\n    this.Rogue = Rogue;\r\n  }\r\n\r\n}).call(this);\r\n"]}